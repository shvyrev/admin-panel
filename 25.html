<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Demo OKZ</title>

    <!--FONTS-->
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700,800" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Raleway:300,200,100" rel="stylesheet" type="text/css">

    <!--jQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

    <!--Bootstrap-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

    <!--Font Awesome-->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!--Theme-->
    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.css" rel="stylesheet" integrity="sha384-RpX8okQqCyUNG7PlOYNybyJXYTtGQH+7rIKiVvg1DLg6jahLEk47VvpUyS+E2/uJ" crossorigin="anonymous">-->

    <!--<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css" rel="stylesheet" integrity="sha384-RpX8okQqCyUNG7PlOYNybyJXYTtGQH+7rIKiVvg1DLg6jahLEk47VvpUyS+E2/uJ" crossorigin="anonymous">-->
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" integrity="sha384-pVJelSCJ58Og1XDc2E95RVYHZDPb9AVyXsI8NoVpB2xmtxoZKJePbMfE4mlXw7BJ" crossorigin="anonymous">

    <!--Other libraries-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>

</head>
<body>
<div class="container-fluid theme-showcase">
    <div class="help-block"></div>
    <h3>Личный кабинет Клиента Оператора Кредитных Заявок -<br>Рабочее место Администратора Банка с МСБ заемщиками</h3>
    <div class="help-block"></div>

    <div class="col-md-10">
        <!--<button id="administrators" type="button" class="btn btn-info">Администраторы</button>-->
        <!--<button id="administrators" type="button" class="btn btn-info">Банки(агенты мсб)</button>-->
        <button id="administrators" type="button" class="btn btn-info">Заемщик</button>
        <button id="administrators" type="button" class="btn btn-info">Сделки по займу</button>
        <!--<button id="administrators" type="button" class="btn btn-info">Представители инвесторов</button>-->
        <!--<button id="administrators" type="button" class="btn btn-info">Инвестор</button>-->
        <!--<button id="administrators" type="button" class="btn btn-info">Сделки по инвестициям</button>-->
        <button id="administrators" type="button" class="btn btn-info">Книга Заявок</button>
        <!--<button id="administrators" type="button" class="btn btn-info">Отчеты агента</button>-->
        <!--<button id="administrators" type="button" class="btn btn-info">Отзывы</button>-->
        <!--<button id="administrators" type="button" class="btn btn-info">Тексты</button>-->
        <div class="col-md-1"></div>
        <button id="unlogin-button" type="button" class="btn btn-secondary">Разлогиниться</button>
        <!--<button id="administrators" type="button" class="btn btn-info">Отзывы</button>-->
        <!--<button id="administrators" type="button" class="btn btn-info">Тексты</button>-->
    </div>
    </div>

</div>

<div class="col-md-2"></div>
<div class="col-md-8">
    <h3>Регистрационная информация</h3>
    <div class="form-group row">
        <label for="name-input" class="col-4 col-form-label">Название юрлица - МСБ заемщика:</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="name-input">
        </div>
    </div>
    <div class="form-group row">
        <label for="inn-input" class="col-4 col-form-label">ИНН</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="inn-input">
        </div>
    </div>
    <div class="form-group row">
        <label for="phone-input" class="col-4 col-form-label">Контактный телефон:</label>
        <div class="col-8">
            <input class="form-control" type="text" value="+79168149060" placeholder="нет данных" id="phone-input">
        </div>
    </div>
    <div class="form-group row">
        <label for="mail-input" class="col-4 col-form-label">Контактный email:</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="mail-input">
        </div>
    </div>
    <div class="form-group row">
        <label for="fio-yur-input" class="col-4 col-form-label">ФИО представителя юрлица:</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="fio-yur-input">
        </div>
    </div>
    <div class="form-group row">
        <label for="ext-input" class="col-4 col-form-label">Дополнительная информация</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="ext-input">
        </div>
    </div>
    <div class="block-helper"></div>
    <h3 class="input-order">Новая Кредитная заявка</h3>
    <!--<div class="form-group row">-->
        <!--<label for="count-input" class="col-4 col-form-label">№</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="count-input">-->
        <!--</div>-->
    <!--</div>-->
    <div class="block-helper"></div>

    <div class="form-group row input-order">
        <label for="id-input" class="col-4 col-form-label">ID заявки</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="id-input">
        </div>
    </div>
    <div class="form-group row input-order">
        <label for="sum-input" class="col-4 col-form-label">Сумма кредита, руб</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="sum-input">
        </div>
    </div>
    <!--<div class="form-group row">-->
        <!--<label for="percent-input" class="col-4 col-form-label">Процент, %</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="percent-input" disabled>-->
        <!--</div>-->
    <!--</div>-->
    <div class="form-group row input-order">
        <label for="period-input" class="col-4 col-form-label">Срок займа, в месяцах</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="period-input">
        </div>
    </div>
    <div class="form-group row input-order">
        <label for="debit-input" class="col-4 col-form-label">Залог:</label>
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="debit-input">-->
        <!--</div>-->
        <div class="btn-group col-8">
            <button class="btn dropdown-toggle" data-toggle="dropdown" id="debit-input">нет</button>
            <ul class="dropdown-menu">
                <li><a data-name="yes-debit" class="debit-drop-list-item">да</a></li>
                <li><a data-name="no-debit" class="debit-drop-list-item">нет</a></li>
            </ul>
        </div>
    </div>
    <!--<div class="form-group row">-->
        <!--<label for="supplier-limit-input" class="col-4 col-form-label">Ограничения по типу Supplier</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="supplier-limit-input" disabled>-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group row">-->
        <!--<label for="supplier-limit-2-input" class="col-4 col-form-label">Лимиты на Supplier - конечника</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="supplier-limit-2-input">-->
        <!--</div>-->
    <!--</div>-->
    <div class="form-group row input-order">
        <label for="yur-scheme-input" class="col-4 col-form-label">Юридическая схема</label>
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="yur-scheme-input">-->
        <!--</div>-->
        <div class="btn-group col-8">
            <button class="btn dropdown-toggle" data-toggle="dropdown" id="yur-scheme-input">прямые договора с кредиторами</button>
            <ul class="dropdown-menu">
                <li><a class="yur-drop-list-item">прямые договора с кредиторами</a></li>
                <li><a class="yur-drop-list-item">займ через МФО</a></li>
            </ul>
        </div>
    </div>
    <div class="form-group row input-order">
        <label for="otrasl-input" class="col-4 col-form-label">Отрасль:</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="otrasl-input">
        </div>
    </div>
    <div class="form-group row input-order">
        <label for="ext-2-input" class="col-4 col-form-label">Дополнительная информация</label>
        <div class="col-8">
            <input class="form-control" type="text" placeholder="нет данных" id="ext-2-input">
        </div>
    </div>
    <div class="form-group row input-order">
        <label for="ext-2-input" class="col-4 col-form-label">Загрузите банковскую выписку:<br>- период выписки - за год;<br>- в формате как для 1С:Бухгалтерии, стандартная бухгалтерская банковская выписка;</label>
        <div class="col-8">
            <label class="btn btn-default btn-file" id="upload-button">
                Загрузить <input type="file" style="display: none;">
            </label>
        </div>
    </div>

    <!--<div class="form-group row">-->
        <!--<label for="id-status" class="col-4 col-form-label">Статус обработки заявки</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="id-status">-->
        <!--</div>-->
    <!--</div>-->

    <!--<div class="block-helper"></div>-->
    <!--<h3>Скоринговая информация</h3>-->
    <!--<div class="form-group row">-->
        <!--<label for="scoring-status-input" class="col-4 col-form-label">Скоринг статус</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="scoring-status-input">-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group row">-->
        <!--<label for="scoring-result-input" class="col-4 col-form-label">Скоринг результат обработки банковской тайны</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="scoring-result-input">-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group row">-->
        <!--<label for="scoring-result-2-input" class="col-4 col-form-label">Скоринг результат из внешних источников</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="scoring-result-2-input">-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group row">-->
        <!--<label for="scoring-result-3-input" class="col-4 col-form-label">Скоринг решение, класс риска</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="scoring-result-3-input">-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group row">-->
        <!--<label for="scoring-info-input" class="col-4 col-form-label">Скоринг справка</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="scoring-info-input">-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="block-helper"></div>-->
    <!--<h3>Информация по займу юрлица</h3>-->
    <!--<div class="form-group row">-->
        <!--<label for="loan-status-input" class="col-4 col-form-label">Займ выдан</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="loan-status-input">-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group row">-->
        <!--<label for="loan-date-input" class="col-4 col-form-label">Дата выдачи</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="loan-date-input">-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group row">-->
        <!--<label for="investor-input" class="col-4 col-form-label">Инвестор</label>-->
        <!--<div class="col-8">-->
            <!--<input class="form-control" type="text" placeholder="нет данных" id="investor-input">-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="form-group row">-->
        <!--<label for="chart-input" class="col-4 col-form-label">График погашения</label>-->
        <!--<div class="col-8" id="chart-input">-->
            <!--<button type="button" class="btn btn-primary">Показать</button>-->
            <!--<button type="button" class="btn btn-secondary">Скачать</button>-->
        <!--</div>-->
    <!--</div>-->
    <div class="form-group row">
        <div class="col-8" id="chart-input">
            <button type="button" class="btn btn-primary send-order" id="send-button">Отправить заявку на скоринг</button>
        </div>
    </div>

    <div class="form-group row hidden" id="order-status">
        <label for="ext-2-input" class="col-4 col-form-label">Статус обработки заявки:</label>
        <div class="col-8">
            <img src="http://www.selloceaapq.es/Images/loading2.gif" width="50px" height="50px">
            <button type="button" class="btn btn-info" id="order-status-button"></button>
        </div>
    </div>

    <div class="form-group row scorring-result hidden">
        <label>Вам одобрен кредит на следующих условиях:</label>
    </div>

    <div class="form-group row scorring-result hidden">
        <label for="result-sum" class="col-4 col-form-label">Сумма, в рублях</label>
        <div class="col-8">
            <input disabled class="form-control" type="text" placeholder="нет данных" id="result-sum">
        </div>
    </div>
    <div class="form-group row scorring-result hidden">
        <label for="result-period" class="col-4 col-form-label">Срок, в месяцах</label>
        <div class="col-8">
            <input disabled class="form-control" type="text" placeholder="нет данных" id="result-period">
        </div>

    </div>
    <div class="form-group row scorring-result hidden">
        <label id="scoring-stavka" class="scorring-result"></label>
    </div>
    <div class="block-helper"></div>
    <div class="form-group row scorring-result hidden">
        <div class="col-4">
            <button type="button" class="btn btn-second relocation">Отказаться</button>
        </div>
        <div class="col-4">
            <button id="agree-button" type="button" class="btn btn-primary">Принять предложение</button>
        </div>
    </div>

</div>
<div class="col-md-2"></div>


<div id="order-modal" class="modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="help-block"></div>
                <p>Спасибо!</p>
                <p>Ваша заявка отправлена на аукцион,<br>после ее подтверждения Инвестором<br>Вы получите финальные условия сделки займа<br>в рамках предложенного диапазона.</p>
                <div class="help-block"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary relocation" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

<script>

    var host = "https://shvyrev.github.io/adminpanel/";

    var orderStatus = [
        "черновик",
        "отправлена",
        "в работе",
        "одобрена",
//        "отклонена"
    ];

    function guid() {
        return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
            s4() + '-' + s4() + s4() + s4();
    }

    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000)
            .toString(16)
            .substring(1);
    }

    function unlogin() {
        $.removeCookie("bankex_role");
        window.location.href = host;
    }

    function readField() {
        if($.cookie("bankex-yur-name")){
            $("#name-input").val($.cookie("bankex-yur-name"));
            $("#name-input").removeAttr("placeholder");
        }
        if($.cookie("bankex-yur-inn")){
            $("#inn-input").val($.cookie("bankex-yur-inn"));
            $("#name-input").removeAttr("placeholder");
        }
        if($.cookie("bankex-yur-phone")){
            $("#phone-input").val($.cookie("bankex-yur-phone"));
            $("#name-input").removeAttr("placeholder");
        }
        if($.cookie("bankex-yur-fio")){
            $("#fio-yur-input").val($.cookie("bankex-yur-fio"));
            $("#name-input").removeAttr("placeholder");
        }
        if($.cookie("bankex-yur-mail")){
            $("#mail-input").val($.cookie("bankex-yur-mail"));
            $("#name-input").removeAttr("placeholder");
        }
        if($.cookie("bankex-yur-ext")){
            $("#ext-input").val($.cookie("bankex-yur-ext"));
            $("#name-input").removeAttr("placeholder");
        }
    }

    var statusInterval;
    var statusCount = 0;
    function changeOrderStatus() {
        $("#order-status-button").text(orderStatus[statusCount]);
    }

    var sum;
    var period;

    var platejFrom;
    var platejTo;

    $(function () {

        $("#id-input").val(guid());

        $(".relocation").click(function () {
            location.reload();
        })

        $('#button').button();

        $('#button').click(function() {
            $(this).html('<img src="http://www.bba-reman.com/images/fbloader.gif" />');
        });

        $("#agree-button").click(function () {
            $("#order-modal").modal("show");
        });

        $("#agree-button").click(function () {
            $("#order-modal").modal("show");
        });

        readField();

        $(".debit-drop-list-item").click(function(e) {
            var name = e.currentTarget;
            $("#debit-input").text(name.innerHTML);
        });

        $(".yur-drop-list-item").click(function(e) {
            var name = e.currentTarget;
            $("#yur-scheme-input").text(name.innerHTML);
        });

        $("#upload-button").on("change", function (e) {
            console.log(e.target.files[0].name);
            if(e.target.files[0].name){
                $("#upload-button").text(e.target.files[0].name);
            }
        })

        $(".send-order").click(function () {

            sum = $("#sum-input").val();
            period = $("#period-input").val();

            platejFrom = Math.round(1.1*sum/period);
            platejTo = Math.round(1.2*sum/period);

            $("#scoring-stavka").html("Процентная ставка, диапазон от 10 до 20 %. <br>Ориентировочный ежемесячный платеж, диапазон, от " + platejFrom + "руб. до " + platejTo + "руб.");

            $("#result-sum").val(sum);
            $("#result-period").val(period);

            $("#send-button").remove();

            $("#id-input").attr( "disabled", true );
            $("#sum-input").attr( "disabled", true );
            $("#period-input").attr( "disabled", true );
            $("#debit-input").attr( "disabled", true );
            $("#yur-scheme-input").attr( "disabled", true );
            $("#otrasl-input").attr( "disabled", true );
            $("#ext-2-input").attr( "disabled", true );
            $("#upload-button").attr( "disabled", true );

            $("#order-status").removeClass("hidden");
            changeOrderStatus();
            statusInterval = setInterval(function () {
                statusCount++;
                if(statusCount < orderStatus.length){
                    changeOrderStatus();
                }else{
                    clearInterval(statusInterval);
                    $("#order-status").remove();
                    $(".scorring-result").removeClass("hidden");

                }
            }, 5000);

        })
//        $(':file').on('fileselect', function(event, numFiles, label) {
//            console.log(numFiles);
//            console.log(label);
//        });

//        $(document).on('change', ':file', function() {
//            var input = $(this),
//                numFiles = input.get(0).files ? input.get(0).files.length : 1,
//                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
//            input.trigger('fileselect', [numFiles, label]);
//        });


//        <input class="form-control" type="text" placeholder="нет данных" id="name-input">
//            </div>
//            </div>
//            <div class="form-group row">
//            <label for="inn-input" class="col-4 col-form-label">ИНН</label>
//            <div class="col-8">
//            <input class="form-control" type="text" placeholder="нет данных" id="inn-input">
//            </div>
//            </div>
//            <div class="form-group row">
//            <label for="phone-input" class="col-4 col-form-label">Телефон</label>
//            <div class="col-8">
//            <input class="form-control" type="text" value="+79168149060" placeholder="нет данных" id="phone-input">
//            </div>
//            </div>
//            <div class="form-group row">
//            <label for="mail-input" class="col-4 col-form-label">емейл</label>
//            <div class="col-8">
//            <input class="form-control" type="text" placeholder="нет данных" id="mail-input">
//            </div>
//            </div>
//            <div class="form-group row">
//            <label for="ext-input" class="col-4 col-form-label">Дополнительная информация</label>
//        <div class="col-8">
//            <input class="form-control" type="text" placeholder="нет данных" id="ext-input">
//            </div>
//            </div>


        $("#unlogin-button").click(function () {
            unlogin()
        });

    })

    function changeLocation(role) {

        if(role){

            var page = "index";

            switch (role){
                case "bank":
                case "agent":
                case "investor":
                    page = "18";
                    break;
                case "portfolio":
                    page = "19";
                    break;
                case "yur":
                    page = "25";
                    break;
            }

            window.location.href = host + page + ".html";
        }
    }

</script>
</body>
</html>
