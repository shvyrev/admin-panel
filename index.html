<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Demo OKZ</title>

    <!--FONTS-->
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700,800" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Raleway:300,200,100" rel="stylesheet" type="text/css">

    <!--jQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

    <!--Bootstrap-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

    <!--Font Awesome-->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!--Theme-->
    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.css" rel="stylesheet" integrity="sha384-RpX8okQqCyUNG7PlOYNybyJXYTtGQH+7rIKiVvg1DLg6jahLEk47VvpUyS+E2/uJ" crossorigin="anonymous">-->

    <!--<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css" rel="stylesheet" integrity="sha384-RpX8okQqCyUNG7PlOYNybyJXYTtGQH+7rIKiVvg1DLg6jahLEk47VvpUyS+E2/uJ" crossorigin="anonymous">-->
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" integrity="sha384-pVJelSCJ58Og1XDc2E95RVYHZDPb9AVyXsI8NoVpB2xmtxoZKJePbMfE4mlXw7BJ" crossorigin="anonymous">

    <!--Other libraries-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>

</head>
<body>
<div class="container-fluid theme-showcase">
    <div class="help-block"></div>

    <div class="col-md-1"></div>

    <h3>Личный кабинет Клиента<br>Оператора Кредитных Заявок</h3>

    <div class="col-md-5">
        <h3>Зарегистрироваться:</h3>
        <button id="ur-lico-registration" type="button" class="btn btn-info">как Юрлицо - МСБ заемщик</button>
        <div class="help-block"></div>
        <button id="bank-registration" type="button" class="btn btn-info"> как Банк с МСБ заемщиками</button>
        <div class="help-block"></div>
        <button id="investor-agent-registration" type="button" class="btn btn-info">как Инвестор</button>
        <div class="help-block"></div>
        <button id="investor-registration" type="button" class="btn btn-info">как Банк - представитель Инвесторов</button>
        <div class="help-block"></div>
    </div>

    <div class="col-md-5">
        <h3>Для зарегистрированных пользователей:</h3>
        <button id="lc-enter" type="button" class="btn btn-info">Войти в личный кабинет</button>
    </div>

    <div id="bank-modal" class="modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Регистрация Банка с МСБ заемщиками:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="help-block"></div>
                    <p>Введите информацию о Вашем банке:</p>
                    <label for="captcha-text">Название банка:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="bank-name">
                    </div>
                    <label for="captcha-text">ФИО представителя:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="bank-fio-admin">
                    </div>
                    <label for="captcha-text">Должность представителя:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="bank-post-admin">
                    </div>
                    <label for="captcha-text">Телефон представителя</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="bank-phone-admin">
                    </div>
                    <label for="captcha-text">Email представителя:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="bank-mail-admin">
                    </div>
                    <label for="captcha-text">Город Банка:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="bank-city">
                    </div>
                    <label for="captcha-text">БИК:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="bank-bik">
                    </div>
                    <label for="captcha-text">Дополнительная информация:</label>
                    <div class="input-group">
                        <textarea class="form-control" required id="bank-ext"></textarea>
                    </div>
                    <div class="help-block"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default close-modal-button">Отменить</button>
                    <button id="bank-reg-button" type="button" class="btn btn-primary" data-dismiss="modal">Отправить</button>
                </div>
            </div>
        </div>
    </div>

    <div id="ur-lico-modal" class="modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Регистрация кредитной заявки</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="help-block"></div>
                    <p>Введите информацию о Вашем юрлице:</p>
                    <label for="captcha-text">Название юрлица:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="ur-lico-name">
                    </div>
                    <label for="captcha-text">ИНН</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="ur-lico-inn">
                    </div>
                    <label for="captcha-text">ФИО представителя юрлица</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="ur-lico-fio">
                    </div>
                    <label for="captcha-text">Телефон</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="ur-lico-phone">
                    </div>
                    <label for="captcha-text">Емейл</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="ur-lico-mail">
                    </div>
                    <label for="captcha-text">Дополнительная информация</label>
                    <div class="input-group">
                        <textarea class="form-control" required id="ur-lico-ext"></textarea>
                    </div>
                    <div class="help-block"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default close-modal-button">Отменить</button>
                    <button id="ur-lico-reg-button" type="button" class="btn btn-primary" data-dismiss="modal">Отправить</button>
                </div>
            </div>
        </div>
    </div>

    <div id="investor-agent-modal" class="modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Регистрация агента Инвесторов в системе Оператора Кредитных Заявок</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="help-block"></div>
                    <p>Заполните данные Агента Инвестора:</p>
                    <label for="captcha-text">Название:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-agent-name">
                    </div>
                    <label for="captcha-text">ФИО представителя:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-agent-fio">
                    </div>
                    <label for="captcha-text">Телефон представителя:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-agent-phone">
                    </div>
                    <label for="captcha-text">email представителя:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-agent-mail">
                    </div>
                    <label for="captcha-text">Город:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-agent-city">
                    </div>
                    <label for="captcha-text">Юридический адрес:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-agent-address">
                    </div>
                    <label for="captcha-text">Дополнительная информация</label>
                    <div class="input-group">
                        <textarea class="form-control" required id="investor-agent-ext"></textarea>
                    </div>
                    <div class="help-block"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default close-modal-button">Отменить</button>
                    <button id="investor-agent-reg-button" type="button" class="btn btn-primary" data-dismiss="modal">Отправить</button>
                </div>
            </div>
        </div>
    </div>

    <div id="investor-modal" class="modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Регистрация Инвестора в системе Оператора Кредитных Заявок:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="help-block"></div>
                    <p>Введите информацию об инвесторе:</p>
                    <label for="captcha-text">Название юрл:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-name">
                    </div>
                    <label for="captcha-text">ИНН:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-inn">
                    </div>
                    <label for="captcha-text">Телефон:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-phone">
                    </div>
                    <label for="captcha-text">Емейл:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="investor-mail">
                    </div>
                    <label for="captcha-text">Дополнительная информация</label>
                    <div class="input-group">
                        <textarea class="form-control" required id="investor-ext"></textarea>
                    </div>
                    <div class="help-block"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default close-modal-button">Отменить</button>
                    <button id="investor-reg-button" type="button" class="btn btn-primary" data-dismiss="modal">Отправить</button>
                </div>
            </div>
        </div>
    </div>

   <div id="enter-modal" class="modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Введите логин и пароль в системе Оператора Кредитных Заявок</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="help-block"></div>
                    <!--<p>Введите информацию об инвесторе:</p>-->

                    <label for="captcha-text">Емейл:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="enter-mail">
                    </div>

                    <label for="captcha-text">Пароль:</label>
                    <div class="input-group">
                        <input type="password" class="form-control" required id="enter-password">
                    </div>

                    <div class="help-block"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default close-modal-button">Отменить</button>
                    <button id="enter-button" type="button" class="btn btn-primary" data-dismiss="modal">Войти</button>
                </div>
            </div>
        </div>
    </div>

    <div id="captcha-modal" class="modal fade">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Капча</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <img id="captcha-image" src="..." class="rounded mx-auto d-block" alt="Responsive image">
                    <div class="help-block"></div>
                    <label for="captcha-text">Пожалуйста введите текст с картинки</label>
                    <div class="input-group">
                        <input type="text" class="form-control" required id="captcha-text">
                    </div>
                    <div class="help-block"></div>
                </div>
                <div class="modal-footer">
                    <button id="reload-image" type="button" class="btn btn-default">Обновить</button>
                    <button id="send-captcha" type="button" class="btn btn-primary" data-dismiss="modal">Отправить</button>
                </div>
            </div>
        </div>
    </div>

    <div id="captcha-error-modal" class="modal fade">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ошибка ввода.</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <label for="captcha-text">Пожалуйста попрробуйте еще раз.</label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="reloadPage()">Повторить</button>
                </div>
            </div>
        </div>
    </div>

    <div id = "alert_placeholder"></div>

</div>

<script>

    var host = "https://shvyrev.github.io/adminpanel/";
//    var host = "http://localhost:8080";
    var captchaRequest = {};

    function setRole(role) {
        $.cookie("bankex_role", role);
        changeLocation(role);
    }

    function getRole() {
        return $.cookie("bankex_role");
    }

    function changeLocation(role) {

        if(role){

            var page = "index";

            switch (role){
                case "bank":
                case "agent":
                case "investor":
                    page = "18";
                    break;
                case "portfolio":
                    page = "19";
                    break;
                case "yur":
                    page = "25";
                    break;
            }

            window.location.href = host + page + ".html";
        }
    }

    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    function openBankRegistration() {
        $("#bank-name").val(""), $("#bank-fio-admin").val(""), $("#bank-phone-admin").val(""), $("#bank-mail-admin").val(""), $("#bank-city").val(""), $("#bank-bik").val(""), $("#bank-ext").val("");
        $("#bank-modal").modal("show");
    }

    function openYurLicoRegistration() {
        $("#ur-lico-name").val(""), $("#ur-lico-inn").val(""), $("#ur-lico-phone").val(""), $("#ur-lico-fio").val(""), $("#ur-lico-mail").val(""), $("#ur-lico-ext").val("");
        $("#ur-lico-modal").modal("show");
    }

    function openInvestorAgentRegistration() {
        $("#investor-agent-name").val(""),$("#investor-agent-fio").val(""),$("#investor-agent-phone").val(""),$("#investor-agent-mail").val(""),$("#investor-agent-city").val(""),$("#investor-agent-address").val(""),$("#investor-agent-ext").val("");
        $("#investor-agent-modal").modal("show");
    }

    function openInvestorRegistration() {
        $("#investor-name").val(""),$("#investor-inn").val(""),$("#investor-phone").val(""),$("#investor-mail").val(""),$("#investor-ext").val("");
        $("#investor-modal").modal("show");
    }

    function openLoginForm() {
        $("#enter-mail").val(""),$("#enter-password").val("");
        $("#enter-modal").modal("show");
    }

    function openDefaultPage(pageType) {
        switch (pageType){
            case "bank":
                openBankRegistration();
                break;
            case "yurlico":
                openYurLicoRegistration();
                break;
            case "investoragent":
                openInvestorAgentRegistration();
                break;
            case "investor":
                openInvestorRegistration();
                break;
            case "login":
                openLoginForm();
                break;
        }
    }

    $(function () {

        var defaultPage = getParameterByName("type");

        if(defaultPage){
            openDefaultPage(defaultPage);
        }

        changeLocation(getRole())

        $(".close-modal-button").click(function () {
            $(".modal").modal("hide");
        });

        $("#bank-registration").click(function () {
            openBankRegistration();
        });

        $("#ur-lico-registration").click(function () {
            openYurLicoRegistration();
        });


        $("#bank-reg-button").click(function () {
            console.log(
                $("#bank-name").val(),
                $("#bank-fio-admin").val(),
                $("#bank-phone-admin").val(),
                $("#bank-mail-admin").val(),
                $("#bank-city").val(),
                $("#bank-bik").val(),
                $("#bank-ext").val()
            );

            if($("#bank-name").val()){
                $.cookie("bankex-bank-name", $("#bank-name").val());
            }

            if($("#bank-fio-admin").val()){
                $.cookie("bankex-bank-fio-admin", $("#bank-fio-admin").val());
            }

            if($("#bank-post-admin").val()){
                $.cookie("bankex-bank-post-admin", $("#bank-post-admin").val());
            }

            if($("#bank-phone-admin").val()){
                $.cookie("bankex-phone-admin", $("#bank-phone-admin").val());
            }

            if($("#bank-mail-admin").val()){
                $.cookie("bankex-bank-mail-admin", $("#bank-mail-admin").val());
            }

            if($("#bank-city").val()){
                $.cookie("bankex-bank-city", $("#bank-city").val());
            }

            if($("#bank-bik").val()){
                $.cookie("bankex-bank-bik", $("#bank-bik").val());
            }

            if($("#bank-ext").val()){
                $.cookie("bankex-bank-ext", $("#bank-ext").val());
            }

            setRole("bank");

            $(".modal").modal("hide");
        })

        $("#ur-lico-reg-button").click(function () {

            console.log(
                $("#ur-lico-name").val(), $("#ur-lico-inn").val(), $("#ur-lico-phone").val(),$("#ur-lico-fio").val(), $("#ur-lico-mail").val(), $("#ur-lico-ext").val()
            );

            if($("#ur-lico-name").val()){
                $.cookie("bankex-yur-name", $("#ur-lico-name").val());
            }

            if($("#ur-lico-inn").val()){
                $.cookie("bankex-yur-inn", $("#ur-lico-inn").val());
            }

            if($("#ur-lico-phone").val()){
                $.cookie("bankex-yur-phone", $("#ur-lico-phone").val());
            }

            if($("#ur-lico-fio").val()){
                $.cookie("bankex-yur-fio", $("#ur-lico-fio").val());
            }

            if($("#ur-lico-mail").val()){
                $.cookie("bankex-yur-mail", $("#ur-lico-mail").val());
            }

            if($("#ur-lico-ext").val()){
                $.cookie("bankex-yur-ext", $("#ur-lico-ext").val());
            }

            setRole("yur");

            $(".modal").modal("hide");
        })

        $("#investor-agent-registration").click(function () {
            openInvestorAgentRegistration();
        });

        $("#investor-agent-reg-button").click(function () {
            console.log(
                $("#investor-agent-name").val(),$("#investor-agent-fio").val(),$("#investor-agent-phone").val(),$("#investor-agent-mail").val(),$("#investor-agent-city").val(),$("#investor-agent-address").val(),$("#investor-agent-ext").val()
            );

            setRole("agent");

            $(".modal").modal("hide");
        })

        $("#investor-registration").click(function () {
            openInvestorRegistration();
        });

        $("#investor-reg-button").click(function () {
            console.log(
                $("#investor-name").val(),$("#investor-inn").val(),$("#investor-phone").val(),$("#investor-mail").val(),$("#investor-ext").val()
            );

            setRole("investor");

            $(".modal").modal("hide");
        })

        $("#lc-enter").click(function () {
            openLoginForm();
        });

        $("#enter-button").click(function () {
            console.log(
                $("#enter-mail").val(),$("#enter-password").val()
            );
            var password = $("#enter-password").val();

            if(password == "demo"){
                setRole($("#enter-mail").val());
            }else{
                unlogin();
            }

            $(".modal").modal("hide");
        })

    })

</script>
</body>
</html>